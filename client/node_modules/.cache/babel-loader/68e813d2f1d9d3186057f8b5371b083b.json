{"ast":null,"code":"import { CONTEXT_STORE } from '../globals';\nexport const createMinimalBaseAudioContextConstructor = (audioDestinationNodeConstructor, createAudioListener, eventTargetConstructor, isNativeOfflineAudioContext, unrenderedAudioWorkletNodeStore, wrapEventListener) => {\n  return class MinimalBaseAudioContext extends eventTargetConstructor {\n    constructor(_nativeContext, numberOfChannels) {\n      super(_nativeContext);\n      this._nativeContext = _nativeContext;\n      CONTEXT_STORE.set(this, _nativeContext); // Bug #93: Edge will set the sampleRate of an AudioContext to zero when it is closed.\n\n      const sampleRate = _nativeContext.sampleRate;\n      Object.defineProperty(_nativeContext, 'sampleRate', {\n        get: () => sampleRate\n      });\n\n      if (isNativeOfflineAudioContext(_nativeContext)) {\n        unrenderedAudioWorkletNodeStore.set(_nativeContext, new Set());\n      }\n\n      this._destination = new audioDestinationNodeConstructor(this, numberOfChannels);\n      this._listener = createAudioListener(this, _nativeContext);\n      this._onstatechange = null;\n    }\n\n    get currentTime() {\n      return this._nativeContext.currentTime;\n    }\n\n    get destination() {\n      return this._destination;\n    }\n\n    get listener() {\n      return this._listener;\n    }\n\n    get onstatechange() {\n      return this._onstatechange;\n    }\n\n    set onstatechange(value) {\n      const wrappedListener = typeof value === 'function' ? wrapEventListener(this, value) : null;\n      this._nativeContext.onstatechange = wrappedListener;\n      const nativeOnStateChange = this._nativeContext.onstatechange;\n      this._onstatechange = nativeOnStateChange !== null && nativeOnStateChange === wrappedListener ? value : nativeOnStateChange;\n    }\n\n    get sampleRate() {\n      return this._nativeContext.sampleRate;\n    }\n\n    get state() {\n      return this._nativeContext.state;\n    }\n\n  };\n};","map":{"version":3,"sources":["/Users/jamescoyne/Desktop/synth-master/client/node_modules/standardized-audio-context/build/es2019/factories/minimal-base-audio-context-constructor.js"],"names":["CONTEXT_STORE","createMinimalBaseAudioContextConstructor","audioDestinationNodeConstructor","createAudioListener","eventTargetConstructor","isNativeOfflineAudioContext","unrenderedAudioWorkletNodeStore","wrapEventListener","MinimalBaseAudioContext","constructor","_nativeContext","numberOfChannels","set","sampleRate","Object","defineProperty","get","Set","_destination","_listener","_onstatechange","currentTime","destination","listener","onstatechange","value","wrappedListener","nativeOnStateChange","state"],"mappings":"AAAA,SAASA,aAAT,QAA8B,YAA9B;AACA,OAAO,MAAMC,wCAAwC,GAAG,CAACC,+BAAD,EAAkCC,mBAAlC,EAAuDC,sBAAvD,EAA+EC,2BAA/E,EAA4GC,+BAA5G,EAA6IC,iBAA7I,KAAmK;AACvN,SAAO,MAAMC,uBAAN,SAAsCJ,sBAAtC,CAA6D;AAChEK,IAAAA,WAAW,CAACC,cAAD,EAAiBC,gBAAjB,EAAmC;AAC1C,YAAMD,cAAN;AACA,WAAKA,cAAL,GAAsBA,cAAtB;AACAV,MAAAA,aAAa,CAACY,GAAd,CAAkB,IAAlB,EAAwBF,cAAxB,EAH0C,CAI1C;;AACA,YAAMG,UAAU,GAAGH,cAAc,CAACG,UAAlC;AACAC,MAAAA,MAAM,CAACC,cAAP,CAAsBL,cAAtB,EAAsC,YAAtC,EAAoD;AAChDM,QAAAA,GAAG,EAAE,MAAMH;AADqC,OAApD;;AAGA,UAAIR,2BAA2B,CAACK,cAAD,CAA/B,EAAiD;AAC7CJ,QAAAA,+BAA+B,CAACM,GAAhC,CAAoCF,cAApC,EAAoD,IAAIO,GAAJ,EAApD;AACH;;AACD,WAAKC,YAAL,GAAoB,IAAIhB,+BAAJ,CAAoC,IAApC,EAA0CS,gBAA1C,CAApB;AACA,WAAKQ,SAAL,GAAiBhB,mBAAmB,CAAC,IAAD,EAAOO,cAAP,CAApC;AACA,WAAKU,cAAL,GAAsB,IAAtB;AACH;;AACD,QAAIC,WAAJ,GAAkB;AACd,aAAO,KAAKX,cAAL,CAAoBW,WAA3B;AACH;;AACD,QAAIC,WAAJ,GAAkB;AACd,aAAO,KAAKJ,YAAZ;AACH;;AACD,QAAIK,QAAJ,GAAe;AACX,aAAO,KAAKJ,SAAZ;AACH;;AACD,QAAIK,aAAJ,GAAoB;AAChB,aAAO,KAAKJ,cAAZ;AACH;;AACD,QAAII,aAAJ,CAAkBC,KAAlB,EAAyB;AACrB,YAAMC,eAAe,GAAI,OAAOD,KAAP,KAAiB,UAAlB,GAAgClB,iBAAiB,CAAC,IAAD,EAAOkB,KAAP,CAAjD,GAAiE,IAAzF;AACA,WAAKf,cAAL,CAAoBc,aAApB,GAAoCE,eAApC;AACA,YAAMC,mBAAmB,GAAG,KAAKjB,cAAL,CAAoBc,aAAhD;AACA,WAAKJ,cAAL,GAAuBO,mBAAmB,KAAK,IAAxB,IAAgCA,mBAAmB,KAAKD,eAAzD,GAChBD,KADgB,GAEhBE,mBAFN;AAGH;;AACD,QAAId,UAAJ,GAAiB;AACb,aAAO,KAAKH,cAAL,CAAoBG,UAA3B;AACH;;AACD,QAAIe,KAAJ,GAAY;AACR,aAAO,KAAKlB,cAAL,CAAoBkB,KAA3B;AACH;;AA1C+D,GAApE;AA4CH,CA7CM","sourcesContent":["import { CONTEXT_STORE } from '../globals';\nexport const createMinimalBaseAudioContextConstructor = (audioDestinationNodeConstructor, createAudioListener, eventTargetConstructor, isNativeOfflineAudioContext, unrenderedAudioWorkletNodeStore, wrapEventListener) => {\n    return class MinimalBaseAudioContext extends eventTargetConstructor {\n        constructor(_nativeContext, numberOfChannels) {\n            super(_nativeContext);\n            this._nativeContext = _nativeContext;\n            CONTEXT_STORE.set(this, _nativeContext);\n            // Bug #93: Edge will set the sampleRate of an AudioContext to zero when it is closed.\n            const sampleRate = _nativeContext.sampleRate;\n            Object.defineProperty(_nativeContext, 'sampleRate', {\n                get: () => sampleRate\n            });\n            if (isNativeOfflineAudioContext(_nativeContext)) {\n                unrenderedAudioWorkletNodeStore.set(_nativeContext, new Set());\n            }\n            this._destination = new audioDestinationNodeConstructor(this, numberOfChannels);\n            this._listener = createAudioListener(this, _nativeContext);\n            this._onstatechange = null;\n        }\n        get currentTime() {\n            return this._nativeContext.currentTime;\n        }\n        get destination() {\n            return this._destination;\n        }\n        get listener() {\n            return this._listener;\n        }\n        get onstatechange() {\n            return this._onstatechange;\n        }\n        set onstatechange(value) {\n            const wrappedListener = (typeof value === 'function') ? wrapEventListener(this, value) : null;\n            this._nativeContext.onstatechange = wrappedListener;\n            const nativeOnStateChange = this._nativeContext.onstatechange;\n            this._onstatechange = (nativeOnStateChange !== null && nativeOnStateChange === wrappedListener)\n                ? value\n                : nativeOnStateChange;\n        }\n        get sampleRate() {\n            return this._nativeContext.sampleRate;\n        }\n        get state() {\n            return this._nativeContext.state;\n        }\n    };\n};\n//# sourceMappingURL=/build/es2019/factories/minimal-base-audio-context-constructor.js.map"]},"metadata":{},"sourceType":"module"}